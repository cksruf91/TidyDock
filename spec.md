# Swift Docker Monitor Specification

## 개요
- macOS 환경에서 Swift 기반 앱을 통해 로컬 Docker(Colima) 환경의 이미지와 컨테이너 상태를 실시간으로 관찰 및 조작할 수 있도록 한다.
- Docker 데몬과 통신은 소켓 경로 `unix:///Users/changyeol/.colima/default/docker.sock`를 사용한다.
- UI는 두 개의 주요 화면(이미지 모니터링, 컨테이너 모니터링)으로 구성되며, 각 화면은 목록형 테이블을 통해 정보를 제공하고 컨트롤을 실행할 수 있는 버튼을 포함한다.

## 운영 환경
- 타겟 플랫폼: macOS (Swift + SwiftUI 또는 AppKit 기반)
- Docker 접속 방식: UNIX 도메인 소켓 `unix:///Users/changyeol/.colima/default/docker.sock`
- 권한: 앱은 로컬 소켓에 접근할 수 있어야 하므로 권한 요청 또는 사용자 안내 필요.

## 공통 UI/UX
- 각 항목마다 삭제/동작 버튼을 제공하고, 중요한 작업(삭제, 컨테이너 삭제)은 확인 대화상자를 통해 재확인.
- 상태 변경 후에는 리스트를 자동으로 갱신하여 최신 정보를 표시.
- 오류 발생 시 사용자에게 알림(배너 또는 모달) 제공.

## 이미지 모니터링 화면
### 항목
- 이미지 이름(태그 포함, 예: `nginx:latest`) 및 레포지토리 이름, 태그 분리 표시
- 이미지 ID
- 생성일자(날짜+시간)
- Disk 사용량(보통 `Size` 필드)
- 사용 여부(컨테이너가 이미지 기반으로 실행 중인지 여부)
- 기타: 레이어 수, 플랫폼 정보(선택 사항)

### 버튼 및 동작
- **이미지 삭제 버튼**
  - 클릭 시 `Confirm` 모달 표시: "정말 [이미지 이름:태그]를 삭제하시겠습니까?"
  - 옵션: "삭제" / "취소"
  - 삭제 성공 시 목록 갱신 및 성공 메시지
  - 삭제 실패 시 오류 메시지

## 컨테이너 모니터링 화면
### 항목
- 컨테이너 ID
- 이미지 이름(태그 포함)
- 실행 명령어(Command)
- 생성일(날짜+시간)
- 상태(예: running, exited)
- 포트 매핑(호스트:컨테이너)
- 컨테이너 이름 (이름/별칭)
- 기타: 네트워크, 상태 설명(Last State)

### 버튼 및 동작
- **컨테이너 삭제 버튼**
  - 클릭 시 `Confirm` 모달: "정말 컨테이너 [name/id]를 삭제하시겠습니까?"
  - 옵션: "삭제" / "취소"
  - 삭제 성공 후 목록 갱신
- **컨테이너 중지 버튼**
  - 실행 상태일 때만 활성화
  - 클릭 시 즉시 중지 요청
  - 성공 시 상태 갱신
- **컨테이너 시작 버튼**
  - 종료(Ghost)/중지 상태일 때 활성화
  - 클릭 시 시작 요청 후 상태 갱신

## 데이터 처리/통신
- Docker REST API (소켓) 호출을 위해 `URLSession` 또는 SwiftNIO 클라이언트를 통해 커스텀 요청 발행.
- 인증 없음; 소켓 접근 권한만 확보하면 된다.
- JSON 응답 파싱: `docker images --format` / `docker ps -a --format`에 대응되는 모델 정의.
- 폴링 주기(예: 5~10초)로 자동 업데이트하며, 수동 새로고침 버튼도 제공.

## 오류/예외 처리
- 소켓 파일 접근 실패: 사용자에게 원인 안내("Colima가 실행 중인지 확인", "권한 확인")
- 요청 타임아웃이나 파싱 오류: 오류 메시지 표시 및 재시도 버튼 노출
- 작업 실패(삭제/중지/시작): 실패 원인을 메시지로 전달, 필요시 로그 수집 옵션 제공

## 비고
- SwiftUI로 개발할 경우 모달 및 버튼 상태 관리가 간편하며 Combine을 이용한 주기적 업데이트 구현 가능.
- 이후 작업에서는 화면 와이어프레임, 데이터 모델, 네트워크 레이어 구조를 추가로 정리할 것.

